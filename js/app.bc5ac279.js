(function(e){function t(t){for(var r,s,i=t[0],u=t[1],l=t[2],d=0,f=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&f.push(n[s][0]),n[s]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);c&&c(t);while(f.length)f.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],r=!0,i=1;i<a.length;i++){var u=a[i];0!==n[u]&&(r=!1)}r&&(o.splice(t--,1),e=s(s.s=a[0]))}return e}var r={},n={app:0},o=[];function s(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=r,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(a,r,function(t){return e[t]}.bind(null,r));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var c=u;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{staticClass:"align-center d-inline-flex"},[a("v-main",[a("v-responsive",{attrs:{"max-width":"600 px"}},[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"2"}},[a("InputForm")],1),a("v-col",{attrs:{cols:"4"}},[a("ResultGrid")],1),a("v-col",{attrs:{cols:"4"}},[a("PlanningBoard")],1)],1)],1)],1)],1)],1)},o=[],s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",[a("v-form",[a("v-text-field",{attrs:{label:"Необходимое количество"},model:{value:e.requiredResources,callback:function(t){e.requiredResources=t},expression:"requiredResources"}}),a("v-text-field",{attrs:{label:"Существующее количество"},model:{value:e.readyResources,callback:function(t){e.readyResources=t},expression:"readyResources"}}),a("v-radio-group",{model:{value:e.material,callback:function(t){e.material=t},expression:"material"}},e._l(e.materials,(function(e){return a("v-radio",{key:e.id,attrs:{label:e.name,value:e}})})),1)],1)],1)],1)},i=[],u=[{id:5,name:"Смолы",smallestAmount:"40",smallestWeight:4},{id:4,name:"Металлы",smallestAmount:"50",smallestWeight:5},{id:3,name:"Керамика",smallestAmount:"40",smallestWeight:4},{id:2,name:"Химикаты",smallestAmount:"30",smallestWeight:3},{id:1,name:"Спецсплавы",smallestAmount:"60",smallestWeight:6}],l=u[1],c={name:"InputForm",data:function(){return{materials:u}},computed:{requiredResources:{get:function(){return this.$store.getters.requiredResources},set:function(e){e=parseInt(e),this.$store.commit("updateForm",{requiredResources:e})}},readyResources:{get:function(){return this.$store.getters.readyResources},set:function(e){e=parseInt(e),this.$store.commit("updateForm",{readyResources:e})}},material:{get:function(){return this.$store.getters.material},set:function(e){this.$store.commit("updateForm",{material:e})}}}},d=c,f=a("2877"),m=a("6544"),v=a.n(m),g=a("a523"),p=a("4bd4"),h=a("67b6"),_=a("43a6"),b=a("0fd9"),k=a("8654"),y=Object(f["a"])(d,s,i,!1,null,"41f7683e",null),x=y.exports;v()(y,{VContainer:g["a"],VForm:p["a"],VRadio:h["a"],VRadioGroup:_["a"],VRow:b["a"],VTextField:k["a"]});var w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"result-grid"},[a("v-container",[a("v-row",[a("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-left",attrs:{colspan:"2"}},[e._v("Размер")]),a("th",{staticClass:"text-left"},[e._v("Вес")]),a("th",{staticClass:"text-left"},[e._v("Количество")])])]),a("tbody",e._l(e.cargoInfo.packages,(function(t){return a("tr",{key:t.size},[a("td",[e._v(e._s(t.amount))]),a("td",[e._v("("+e._s(t.volumeMarker)+")")]),a("td",[e._v(e._s(t.weight)+" kg")]),a("td",[e._v(e._s(t.count)+" шт")])])})),0)]},proxy:!0}])})],1),a("v-row",[a("v-btn",{staticClass:"info",attrs:{value:"+"},on:{click:e.onClick}},[e._v("+")])],1)],1),a("v-container",[a("v-row",[a("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[a("tbody",[a("tr",[a("td",[e._v("Перерасход:")]),a("td",[e._v(e._s(e.cargoInfo.overResources))])]),a("tr",[a("td",[e._v("Масса:")]),a("td",[e._v(e._s(e.cargoInfo.weight)+" kg")])]),a("tr",[a("td",[e._v("Объём:")]),a("td",[e._v(e._s(e.cargoInfo.volumeSize)+"S")])])])]},proxy:!0}])})],1)],1)],1)},R=[],C=a("54f8"),O=a("f3f3"),V=(a("d81d"),a("4de4"),a("a434"),a("2f62"));r["a"].use(V["a"]);var j=new V["a"].Store({state:{form:{requiredResources:0,readyResources:0,material:l},board:[]},getters:{requiredResources:function(e){return e.form.requiredResources},readyResources:function(e){return e.form.readyResources},material:function(e){return e.form.material}},mutations:{updateForm:function(e,t){e.form=Object(O["a"])(Object(O["a"])({},e.form),t)},addCargoInfo:function(e,t){e.board.push(t)},dropCargoInfo:function(e,t){e.board.splice(t,1)}}}),P=a("276c"),S=a("e954"),M=(a("3410"),function(){function e(t,a){switch(Object(P["a"])(this,e),this.size=t,this.material=a,this.volumeSize=this.size>4?6:this.size,this.volumeMarker="",this.volumeSize){case 1:this.volumeMarker="S";break;case 2:this.volumeMarker="M";break;case 4:this.volumeMarker="L";break;case 6:this.volumeMarker="XL";break}this.amount=a.smallestAmount*this.size,this.weight=a.smallestWeight*this.size}return Object(S["a"])(e,[{key:"setupCount",value:function(e){var t=Math.floor(e/this.amount),a=this.amount*t,r=this.weight*t,n=this.volumeSize*t;return this.count=t,{count:t,deltaAmount:a,deltaWeight:r,deltaVolumeSize:n}}},{key:"clone",value:function(){return Object.assign(Object.create(Object.getPrototypeOf(this)),this)}},{key:"key",get:function(){return 100*this.material.id+this.size}},{key:"aggregate",value:function(e){this.count+=e.count}}]),e}()),I=M,$=function(e){var t=[1,2,4,8,12,16,20].map((function(t){return new I(t,e)}));return{smallest:t[0],packageInfos:t.reverse()}},z={name:"ResultGrid",methods:{onClick:function(){var e=j.getters.material,t=this.cargoInfo.packages.filter((function(e){return e.count})),a=Object(O["a"])(Object(O["a"])({},this.cargoInfo),{},{material:e,packages:t});delete a.overResources,j.commit("addCargoInfo",a)}},computed:{cargoInfo:function(){var e,t=$(j.getters.material),a=Math.max(0,j.getters.requiredResources-j.getters.readyResources),r=Math.ceil(a/t.smallest.amount)*t.smallest.amount,n=r-a,o=0,s=0,i=[],u=Object(C["a"])(t.packageInfos);try{for(u.s();!(e=u.n()).done;){var l=e.value,c=l.setupCount(r),d=c.deltaAmount,f=c.deltaWeight,m=c.deltaVolumeSize;i.push(l),r-=d,o+=f,s+=m}}catch(v){u.e(v)}finally{u.f()}return{overResources:n,weight:o,volumeSize:s,packages:i}}}},A=z,T=a("8336"),q=a("1f4f"),F=Object(f["a"])(A,w,R,!1,null,null,null),E=F.exports;v()(F,{VBtn:T["a"],VContainer:g["a"],VRow:b["a"],VSimpleTable:q["a"]});var W=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",[a("PlanningResume")],1),a("v-row",[a("PlanningTasks")],1)],1)},B=[],G=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",e._l(e.board,(function(e){return a("PlanningTask",{key:e.index,attrs:{material:e.material,packages:e.packages,index:e.index}})})),1)},J=[],L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"float-left ma-2"},[a("v-card-text",[a("div",[e._v(e._s(e.material.name))]),e._l(e.packages,(function(t){return a("div",{key:t.size},[e._v(" "+e._s(t.amount)+" ("+e._s(t.volumeMarker)+"): "+e._s(t.count)+" ")])}))],2),a("v-card-actions",[a("v-btn",{staticClass:"error",on:{click:e.onClick}},[e._v("—")])],1)],1)},N=[],D=(a("a9e3"),{name:"PlanningTask",props:{index:Number,packages:Array,material:Object},methods:{onClick:function(){this.$store.commit("dropCargoInfo",this.index)}}}),X=D,H=a("b0af"),K=a("99d9"),Q=Object(f["a"])(X,L,N,!1,null,"b85c621a",null),U=Q.exports;v()(Q,{VBtn:T["a"],VCard:H["a"],VCardActions:K["a"],VCardText:K["b"]});var Y={name:"PlanningTasks",computed:{board:function(){return this.$store.state.board.map((function(e,t){return Object(O["a"])({index:t},e)}))}},components:{PlanningTask:U}},Z=Y,ee=Object(f["a"])(Z,G,J,!1,null,"0bd1d054",null),te=ee.exports;v()(ee,{VContainer:g["a"]});var ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",[a("v-row",[a("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-left"},[e._v("Материал")]),a("th",{staticClass:"text-left",attrs:{colspan:"2"}},[e._v("Размер")]),a("th",{staticClass:"text-left"},[e._v("Вес")]),a("th",{staticClass:"text-left"},[e._v("Количество")])])]),a("tbody",e._l(e.aggregatedPackages.aggregatedPackages,(function(t){return a("tr",{key:t[0]},[a("td",[e._v(e._s(t[1].material.name))]),a("td",[e._v(e._s(t[1].amount))]),a("td",[e._v("("+e._s(t[1].volumeMarker)+")")]),a("td",[e._v(e._s(t[1].weight)+" kg")]),a("td",[e._v(e._s(t[1].count)+" шт")])])})),0)]},proxy:!0}])})],1),a("v-row",[a("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[a("tbody",[a("tr",[a("td",[e._v("Общий объём:")]),a("td",[e._v(e._s(e.aggregatedPackages.totalVolume))])]),a("tr",[a("td",[e._v("Остаток места:")]),a("td",[e._v(e._s(e.aggregatedPackages.freeVolume)+"S")])]),a("tr",[a("td",[e._v("Заполнение:")]),a("td",[e._v(e._s(e.aggregatedPackages.ratio)+"%")])])])]},proxy:!0}])})],1)],1)},re=[],ne=(a("4ec9"),a("d3b7"),a("3ca3"),a("ddb0"),a("159b"),a("0481"),a("4e827"),a("a630"),168),oe={name:"PlanningResume",computed:{aggregatedPackages:function(){var e=new Map;this.$store.state.board.map((function(e){return e.packages})).flat().forEach((function(t){var a=t.key;e.has(a)?e.get(a).aggregate(t):e.set(a,t.clone())}));var t=Array.from(e).sort((function(e,t){return t[0]-e[0]}));console.log("Aggregated: %s",JSON.stringify(t));var a=t.map((function(e){return e[1]})).map((function(e){return e.volumeSize*e.count})).reduce((function(e,t){return e+t}),0),r=ne-a,n=Math.round(100*a/ne);return{aggregatedPackages:t,totalVolume:a,freeVolume:r,ratio:n}}}},se=oe,ie=Object(f["a"])(se,ae,re,!1,null,"16f64fbd",null),ue=ie.exports;v()(ie,{VContainer:g["a"],VRow:b["a"],VSimpleTable:q["a"]});var le={name:"PlanningBoard",components:{PlanningTasks:te,PlanningResume:ue}},ce=le,de=Object(f["a"])(ce,W,B,!1,null,"d43c1e6c",null),fe=de.exports;v()(de,{VContainer:g["a"],VRow:b["a"]});var me={name:"DSPackCalculator",components:{InputForm:x,ResultGrid:E,PlanningBoard:fe}},ve=me,ge=a("7496"),pe=a("62ad"),he=a("f6c4"),_e=a("6b53"),be=Object(f["a"])(ve,n,o,!1,null,null,null),ke=be.exports;v()(be,{VApp:ge["a"],VCol:pe["a"],VContainer:g["a"],VMain:he["a"],VResponsive:_e["a"],VRow:b["a"]});var ye=a("f309");r["a"].use(ye["a"]);var xe=new ye["a"]({});r["a"].config.productionTip=!1,new r["a"]({vuetify:xe,store:j,render:function(e){return e(ke)}}).$mount("#app")}});
//# sourceMappingURL=app.bc5ac279.js.map